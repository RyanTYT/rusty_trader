2025-02-18 09:07:18,446 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,447 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,448 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,449 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,452 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:18,456 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:45,944 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:46,769 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:48,443 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 457
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:48,575 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 457 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:07:53,382 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 609, in sleep
    return await future
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 19, in run
    ibkr.ib.sleep(60 * 30)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 405, in sleep
    run(asyncio.sleep(secs))
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 362, in run
    raise globalErrorEvent.value() or e
ConnectionError: Socket disconnect

--------------------------------------------------------------------------------[0m
2025-02-18 09:07:53,382 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,184 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,185 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,186 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,187 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,190 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:01,194 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:12,171 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:12,246 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 09:08:12,247 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,997 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,998 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:24,999 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,000 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,004 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:25,009 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:33,230 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:08:33,282 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 09:08:33,283 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,786 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,792 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,793 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,794 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,794 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,794 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,795 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,796 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,797 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,798 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,799 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,799 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,799 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,799 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,799 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,806 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:30,813 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:56,854 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:57,729 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:58,494 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 467
--------------------------------------------------------------------------------[0m
2025-02-18 09:13:58,585 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 467 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:17:56,815 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 609, in sleep
    return await future
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 19, in run
    ibkr.ib.sleep(60 * 30)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 405, in sleep
    run(asyncio.sleep(secs))
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 362, in run
    raise globalErrorEvent.value() or e
ConnectionError: Socket disconnect

--------------------------------------------------------------------------------[0m
2025-02-18 09:17:56,815 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,930 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,930 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,930 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,931 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,932 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,933 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,939 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:31:06,943 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:33:34,816 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:33:35,661 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:33:36,396 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 477
--------------------------------------------------------------------------------[0m
2025-02-18 09:33:36,520 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 477 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:33:54,698 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 609, in sleep
    return await future
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 19, in run
    ibkr.ib.sleep(60 * 30)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 405, in sleep
    run(asyncio.sleep(secs))
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 362, in run
    raise globalErrorEvent.value() or e
ConnectionError: Socket disconnect

--------------------------------------------------------------------------------[0m
2025-02-18 09:33:54,698 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,948 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,949 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,950 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,951 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,952 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,956 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:04,959 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:37:43,748 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:09,509 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:15,123 - IBAsyncBroker - ERROR - 
[31m--------------------------------------------------------------------------------
reqMktData() in get_current_price() timed out - no data for ticker: SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:20,615 - IBAsyncBroker - ERROR - 
[31m--------------------------------------------------------------------------------
reqMktData() in get_current_price() timed out - no data for ticker: SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:31,078 - IBAsyncBroker - ERROR - 
[31m--------------------------------------------------------------------------------
reqMktData() in get_current_price() timed out - no data for ticker: SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:31,707 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 488
--------------------------------------------------------------------------------[0m
2025-02-18 09:39:31,899 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 488 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,879 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,887 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 09:42:06,891 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 09:50:12,399 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 09:50:13,238 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 09:50:14,070 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 487
--------------------------------------------------------------------------------[0m
2025-02-18 09:50:14,175 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 487 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 10:54:12,094 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 609, in sleep
    return await future
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 196, in result
    raise exc
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 19, in run
    ibkr.ib.sleep(60 * 30)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 405, in sleep
    run(asyncio.sleep(secs))
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 362, in run
    raise globalErrorEvent.value() or e
ConnectionError: Socket disconnect

--------------------------------------------------------------------------------[0m
2025-02-18 10:54:12,095 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,768 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,772 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,773 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,774 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,775 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,775 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,775 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,775 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,775 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,778 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:10,782 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:50,230 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 11:47:50,241 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 11:47:50,242 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,861 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,862 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,863 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,864 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,868 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:28,872 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:42,068 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 12:09:42,081 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 12:09:42,082 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,976 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,977 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,978 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,979 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,980 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,984 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:05,988 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:24,753 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 12:53:24,765 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 12:53:24,766 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,168 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,169 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,170 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,171 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,176 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:07,179 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:27,729 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 13:07:27,741 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 16, in run
    await asyncio.gather(*[daily_run_using(strategy['broker'], strategy['strategy']) for strategy in atomic_strategies])
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/create_app.py", line 30, in daily_run_using
    ibkr.connect_to_broker()
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 52, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
2025-02-18 13:07:27,741 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,881 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,882 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,883 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,884 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,885 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,890 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:06,894 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:33,520 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:34,432 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:35,075 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 497
--------------------------------------------------------------------------------[0m
2025-02-18 13:11:35,131 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 497 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,556 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,557 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: current_price
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'current_price': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,558 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,559 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,563 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:07,568 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:35,411 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:36,142 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
connect(): Successfully connected to IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:36,883 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
New order placed: 507
--------------------------------------------------------------------------------[0m
2025-02-18 21:55:37,000 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
Order submitted: 507 for SPY
--------------------------------------------------------------------------------[0m
2025-02-18 22:25:37,026 - IBAsyncBroker - INFO - 
[32m--------------------------------------------------------------------------------
disconnect(): Successfully disconnected from IBKR.
--------------------------------------------------------------------------------[0m
2025-02-18 22:25:37,038 - send_command_to_ibc() - INFO - 
[32m--------------------------------------------------------------------------------
Response: OK Shutting down: STOP command

--------------------------------------------------------------------------------[0m
