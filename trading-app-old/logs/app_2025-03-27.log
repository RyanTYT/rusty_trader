2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: capital
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'strategy': 'str', 'capital': 'float'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: CurrentPosition
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,394 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit_in_place
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'quantity': 'float', 'stop_limit': 'float', 'stop_limit_in_place': 'int', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: TargetPosition
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: avg_price_bought
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stop_limit
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'avg_price_bought': 'float', 'quantity': 'float', 'stop_limit': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: OpenOrders
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: order_id
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,395 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'order_id': 'int', 'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: Transaction
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: price_transacted
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: fees
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: quantity
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: strategy
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'price_transacted': 'float', 'fees': 'float', 'quantity': 'float', 'strategy': 'str'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
Found class: HistoricalData
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: stock
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: str
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: time
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: datetime.datetime
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: open
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: high
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,396 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: low
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: close
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: float
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Processing field: volume
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
    Field type: int
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,397 - models_types_generator - INFO - 
[32m--------------------------------------------------------------------------------
  Fields: {'stock': 'str', 'time': 'datetime.datetime', 'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float', 'volume': 'int'}
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,503 - init_db() - INFO - 
[32m--------------------------------------------------------------------------------
Database initialization complete.
--------------------------------------------------------------------------------[0m
2025-03-27 21:55:07,507 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS START
--------------------------------------------------------------------------------[0m
2025-03-28 10:13:51,802 - IBC - INFO - 
[32m--------------------------------------------------------------------------------
IBC LOGS END - IBKR started
--------------------------------------------------------------------------------[0m
2025-03-28 10:13:52,543 - run.py - ERROR - 
[31m--------------------------------------------------------------------------------
Failed, Disconnecting from brokers now: Traceback (most recent call last):
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 27, in run
    [broker.connect_to_broker() for brokers in (daily, hourly, five_minute) for broker in brokers]
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/run.py", line 27, in <listcomp>
    [broker.connect_to_broker() for brokers in (daily, hourly, five_minute) for broker in brokers]
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/app/services/broker/IBKR.py", line 62, in connect_to_broker
    self.ib.connect(self.host, self.port, self.client_id, timeout=timeout, account=self.account)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 367, in connect
    return self._run(
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 418, in _run
    return util.run(*awaitables, timeout=self.RequestTimeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/util.py", line 360, in run
    result = loop.run_until_complete(task)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/nest_asyncio.py", line 98, in run_until_complete
    return f.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 232, in __step
    result = coro.send(None)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/ib.py", line 2020, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 447, in wait_for
    return fut.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 234, in __step
    result = coro.throw(exc)
  File "/Users/ryantan/Downloads/Personal Projects/auto ibkr/py_book/backend/venv/lib/python3.10/site-packages/ib_async/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(lambda: self, host, port)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1055, in create_connection
    raise exceptions[0]
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 1040, in create_connection
    sock = await self._connect_sock(
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/base_events.py", line 954, in _connect_sock
    await self.sock_connect(sock, address)
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 502, in sock_connect
    return await fut
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 284, in __await__
    yield self  # This tells Task to wait for completion.
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/tasks.py", line 304, in __wakeup
    future.result()
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Users/ryantan/.pyenv/versions/3.10.0/lib/python3.10/asyncio/selector_events.py", line 537, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 7497)

--------------------------------------------------------------------------------[0m
